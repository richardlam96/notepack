#!/usr/bin/env bash
source $(dirname $0)/description
source $(dirname $0)/testflow

# Initialize Notepack.
#
# Creates files and folders for the root directory of the app in the directory
# where the app is placed.
#
init_root()
{
  mkdir ./tickets/
  mkdir ./features/
}


# New Notepack.
#
# Creates files and folders for a new notepack for a specific ticket.
#
new_notepack()
{
  echo -e "\e[96mCreating folders and initializing files"
  mkdir ./tickets/"$ticket_name"/testflows
  mkdir ./tickets/"$ticket_name"/pictures
  mkdir ./tickets/"$ticket_name"/scripts

  new_description
  new_testflow
}


# Show Help Menu.
#
# Show usage menu. To be used any time an error occurs.
#
show_help_menu() {
  echo "
    Usage: notepack [OPTION]... [TICKET_NAME]...
    Notepack App. Create folder structures and files for writing testflow notes
    and prototypes.

    --new-notepack    Creates new Notepack package with given ticket name.
    --new-testflow    Creates a new test for given ticket name.
    --init            Creates root folders for the app.
    --help            Shows this menu.
  "
}


# Main Script #################################################################

# Global Variables.
action="$1"
ticket_name="$2"

# Process arguments. Mostly create new notepack or testflow or init app.
case "$action" in
  "--init") init_root ;;
  "--new-notepack") new_notepack ;;
  "--new-testflow") new_testflow ;;
  * | "--help") show_help_menu ;;
esac

exit 0
